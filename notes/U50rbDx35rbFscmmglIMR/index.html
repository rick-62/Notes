<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><title>Mocks</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal Knowledge Space"/><meta property="og:title" content="Mocks"/><meta property="og:description" content="Personal Knowledge Space"/><meta property="og:url" content="https://rick-62.github.io/notes/U50rbDx35rbFscmmglIMR/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="1/11/2022"/><meta property="article:modified_time" content="2/25/2022"/><link rel="canonical" href="https://rick-62.github.io/notes/U50rbDx35rbFscmmglIMR/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/cc2307f6fd3a2fec.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cc2307f6fd3a2fec.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-709abf7ab5f510de.js" defer=""></script><script src="/_next/static/chunks/framework-bb5c596eafb42b22.js" defer=""></script><script src="/_next/static/chunks/main-c4b0e551a2150d17.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c259f160a0162632.js" defer=""></script><script src="/_next/static/chunks/826-e0e455fb469c158f.js" defer=""></script><script src="/_next/static/chunks/986-737e5da213076068.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-00dd1421f3ce3a3e.js" defer=""></script><script src="/_next/static/x_d4yb4f_0V4SOPHOkEsf/_buildManifest.js" defer=""></script><script src="/_next/static/x_d4yb4f_0V4SOPHOkEsf/_ssgManifest.js" defer=""></script><script src="/_next/static/x_d4yb4f_0V4SOPHOkEsf/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><section class="ant-layout side-layout-main" style="max-width:1200px;display:initial"><main class="ant-layout-content main-content" role="main" style="padding:0 24px"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="mocks"><a aria-hidden="true" class="anchor-heading" href="#mocks"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Mocks</h1>
<h2 id="intro"><a aria-hidden="true" class="anchor-heading" href="#intro"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Intro</h2>
<p>Mocks provide a way to interact with external systems during testing, without needing access the external system.</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">from</span> unittest <span class="token keyword">import</span> mock

<span class="token comment"># create mock object</span>
m <span class="token operator">=</span> mock<span class="token punctuation">.</span>Mock<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># set an attribute</span>
m<span class="token punctuation">.</span>some_attribute

<span class="token comment"># set a function/method</span>
m<span class="token punctuation">.</span>some_attribute<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># set return value</span>
m<span class="token punctuation">.</span>some_attribute<span class="token punctuation">.</span>return_value <span class="token operator">=</span> <span class="token number">42</span>
m<span class="token punctuation">.</span>some_attribute<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># returns 42</span>
</code></pre>
<h2 id="complex-return-values-side_effect"><a aria-hidden="true" class="anchor-heading" href="#complex-return-values-side_effect"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Complex return values (side_effect)</h2>
<p>However, the problem comes when trying to set a function as the return value to the attribute. </p>
<p>Example:</p>
<pre class="language-python"><code class="language-python">
<span class="token comment"># any function</span>
<span class="token keyword">def</span> <span class="token function">print42</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token number">42</span>

<span class="token comment"># set attribute return value to print42</span>
m<span class="token punctuation">.</span>some_attribute<span class="token punctuation">.</span>return_value <span class="token operator">=</span> print42

m<span class="token punctuation">.</span>some_attribute<span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token comment"># call attribute from mocks - expecting the return value of 42</span>
<span class="token comment"># does not resolve print42 function and prints function meta data instead</span>

</code></pre>
<p>To resolve this issue, mock also has the <code>side_effect</code> attribute, which accepts callables, iterables, and exceptions, changing behaviour accordingly.</p>
<ul>
<li>if an exception is passed the mock will raise it</li>
<li>if an iterable is passed the mock will yield the results of the iterable</li>
<li>if a callable is passed the mock will resolve it</li>
</ul>
<pre class="language-python"><code class="language-python">m<span class="token punctuation">.</span>some_attribute<span class="token punctuation">.</span>side_effect <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

m<span class="token punctuation">.</span>some_attribute<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 1</span>
m<span class="token punctuation">.</span>some_attribute<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 2</span>
m<span class="token punctuation">.</span>some_attribute<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 3</span>
m<span class="token punctuation">.</span>some_attribute<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># StopIteration exception</span>


<span class="token comment"># any function</span>
<span class="token keyword">def</span> <span class="token function">print42</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token number">42</span>

m<span class="token punctuation">.</span>some_attribute<span class="token punctuation">.</span>side_effect <span class="token operator">=</span> print_answer
m<span class="token punctuation">.</span>some_attribute<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 42</span>
</code></pre>
<h2 id="asserting-calls"><a aria-hidden="true" class="anchor-heading" href="#asserting-calls"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Asserting calls</h2>
<pre class="language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">MyObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> repo<span class="token punctuation">)</span><span class="token punctuation">:</span>
        repo<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">from</span> unittest <span class="token keyword">import</span> mock
<span class="token keyword">import</span> myobj

<span class="token keyword">def</span> <span class="token function">test_connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    external_obj <span class="token operator">=</span> mock<span class="token punctuation">.</span>Mock<span class="token punctuation">(</span><span class="token punctuation">)</span>
    myobj<span class="token punctuation">.</span>MyObj<span class="token punctuation">(</span>external_obj<span class="token punctuation">)</span>
    external_obj<span class="token punctuation">.</span>connect<span class="token punctuation">.</span>assert_called_with<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>This would pass the test as the mock in this case is simply recording what it was called with, using the <code>assert_called_with()</code> method. </p>
<p>It is also possible to pass the expected arguments e.g. <code>assert_called_with(t=10, x="string")</code>. In the above example this would fail as the argument was actually called with no arguments. </p>
<p>There are other methods and attributes mock provides:</p>
<ul>
<li><code>assert_called_once_with</code></li>
<li><code>assert_any_call</code></li>
<li><code>assert_has_calls</code></li>
<li><code>assert_not_called</code></li>
<li><code>call_count</code></li>
<li>etc...</li>
</ul>
<h2 id="patching"><a aria-hidden="true" class="anchor-heading" href="#patching"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Patching</h2>
<p>Patching essentially intercepts known function calls and replace the return value.</p>
<p>This can be useful when we know the value will change dependent on external factors, which do not depend on our code. The downside to patching is the test is no longer pure and relies on knowing upfront which callable return value will require patching.</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">import</span> os
<span class="token keyword">from</span> unittest<span class="token punctuation">.</span>mock <span class="token keyword">import</span> patch

<span class="token keyword">def</span> <span class="token function">filepath</span><span class="token punctuation">(</span>relative_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>relative_path<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">test_filepath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    relative_path <span class="token operator">=</span> <span class="token string">'../somefile.ext'</span>

    <span class="token comment"># patch externally dependent callable and test within with block</span>
    <span class="token keyword">with</span> patch<span class="token punctuation">(</span><span class="token string">'os.path.abspath'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> abspath_mock<span class="token punctuation">:</span>

        <span class="token comment"># fake absolute path</span>
        test_abspath <span class="token operator">=</span> <span class="token string">'some/abs/path'</span>

        <span class="token comment"># set new output for os.path.abspath</span>
        abspath_mock<span class="token punctuation">.</span>return_value <span class="token operator">=</span> test_abspath

        <span class="token comment"># when os.path.abspath called returns 'some/abs/path' instead</span>
        <span class="token keyword">assert</span> filepath<span class="token punctuation">(</span>relative_path<span class="token punctuation">)</span> <span class="token operator">==</span> test_abspath
</code></pre>
<h3 id="patching-decorator"><a aria-hidden="true" class="anchor-heading" href="#patching-decorator"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Patching decorator</h3>
<p>Patching can alternatively be done with the help of a decorator.</p>
<pre class="language-python"><code class="language-python"><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>

<span class="token comment"># decorator applied to entire function</span>
<span class="token decorator annotation punctuation">@patch</span><span class="token punctuation">(</span><span class="token string">'os.path.abspath'</span><span class="token punctuation">)</span>

<span class="token comment"># first argument is now the the mock variable</span>
<span class="token keyword">def</span> <span class="token function">test_filepath</span><span class="token punctuation">(</span>abspath_mock<span class="token punctuation">)</span><span class="token punctuation">:</span>
    relative_path <span class="token operator">=</span> <span class="token string">'../somefile.ext'</span>

    <span class="token comment"># with statement now removed</span>
    test_abspath <span class="token operator">=</span> <span class="token string">'some/abs/path'</span>
    abspath_mock<span class="token punctuation">.</span>return_value <span class="token operator">=</span> test_abspath
    <span class="token keyword">assert</span> filepath<span class="token punctuation">(</span>relative_path<span class="token punctuation">)</span> <span class="token operator">==</span> test_abspath
</code></pre>
<p>Same can also be achieved for multiple patches at the same time.</p>
<pre class="language-python"><code class="language-python"><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>

<span class="token comment"># two decorators applied</span>
<span class="token decorator annotation punctuation">@patch</span><span class="token punctuation">(</span><span class="token string">'os.path.getsize'</span><span class="token punctuation">)</span>
<span class="token decorator annotation punctuation">@patch</span><span class="token punctuation">(</span><span class="token string">'os.path.abspath'</span><span class="token punctuation">)</span>

<span class="token comment"># second argument is added for the getsize mock</span>
<span class="token keyword">def</span> <span class="token function">test_filepath</span><span class="token punctuation">(</span>abspath_mock<span class="token punctuation">,</span> getsize_mock<span class="token punctuation">)</span><span class="token punctuation">:</span>
    relative_path <span class="token operator">=</span> <span class="token string">'../somefile.ext'</span>

    test_abspath <span class="token operator">=</span> <span class="token string">'some/abs/path'</span>
    abspath_mock<span class="token punctuation">.</span>return_value <span class="token operator">=</span> test_abspath

    <span class="token comment"># fake size set as output for os.path.getsize</span>
    test_size <span class="token operator">=</span> <span class="token number">1234</span>
    getsize_mock<span class="token punctuation">.</span>return_value <span class="token operator">=</span> test_size

    <span class="token keyword">assert</span> filepath<span class="token punctuation">(</span>relative_path<span class="token punctuation">)</span> <span class="token operator">==</span> test_abspath
    <span class="token keyword">assert</span> filesize<span class="token punctuation">(</span>relative_path<span class="token punctuation">)</span> <span class="token operator">==</span> test_size
</code></pre>
<h3 id="immutable-objects"><a aria-hidden="true" class="anchor-heading" href="#immutable-objects"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Immutable objects</h3>
<p>Objects implemented in C are shared between the interpreter and require the objects to be immutable. Therefore it is not always possible to directly patch an object.</p>
<p>For example, if we were to attempt to patch the datetime now method <code>@patch('datetime.datetime.now')</code>, this would throw an error <code>TypeError: can't set attributes of built-in/extension type 'datetime.datetime'</code>.</p>
<p>There are ways to address this and start from the fact that importing or sub-classing an immutable object gives you a mutable <em>copy</em>.</p>
<pre class="language-python"><code class="language-python"><span class="token comment"># patch now points to imported module</span>
<span class="token decorator annotation punctuation">@patch</span><span class="token punctuation">(</span><span class="token string">'fileinfo.logger.datetime.datetime'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_log</span><span class="token punctuation">(</span>mock_now<span class="token punctuation">)</span><span class="token punctuation">:</span>
    test_now <span class="token operator">=</span> <span class="token number">123</span>
    test_message <span class="token operator">=</span> <span class="token string">"A test message"</span>
    
    <span class="token comment"># method "now" return value must be set at this point</span>
    mock_now<span class="token punctuation">.</span>now<span class="token punctuation">.</span>return_value <span class="token operator">=</span> test_now
    
    test_logger <span class="token operator">=</span> Logger<span class="token punctuation">(</span><span class="token punctuation">)</span>
    test_logger<span class="token punctuation">.</span>log<span class="token punctuation">(</span>test_message<span class="token punctuation">)</span>

    <span class="token keyword">assert</span> test_logger<span class="token punctuation">.</span>messages <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>test_now<span class="token punctuation">,</span> test_message<span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre>
<p>Could alternatively create an additional function to call the immutable object and reference from that, however, this requires changing source code. Best practise to avoid changing source code for testing. </p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#intro" title="Intro">Intro</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#complex-return-values-side_effect" title="Complex return values (side_effect)">Complex return values (side_effect)</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#asserting-calls" title="Asserting calls">Asserting calls</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#patching" title="Patching">Patching</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#patching-decorator" title="Patching decorator">Patching decorator</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#immutable-objects" title="Immutable objects">Immutable objects</a></div></div></div></div></div></div></div></div></div></main><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></section></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"U50rbDx35rbFscmmglIMR","title":"Mocks","desc":"","updated":1645777652288,"created":1641889560814,"custom":{},"fname":"python.testing.mocks","type":"note","vault":{"fsPath":"vault"},"contentHash":"7622c45398f8f00ea22cbdf9108977f1","links":[],"anchors":{"intro":{"type":"header","text":"Intro","value":"intro","line":8,"column":0,"depth":2},"complex-return-values-side_effect":{"type":"header","text":"Complex return values (side_effect)","value":"complex-return-values-side_effect","line":28,"column":0,"depth":2},"asserting-calls":{"type":"header","text":"Asserting calls","value":"asserting-calls","line":70,"column":0,"depth":2},"patching":{"type":"header","text":"Patching","value":"patching","line":98,"column":0,"depth":2},"patching-decorator":{"type":"header","text":"Patching decorator","value":"patching-decorator","line":126,"column":0,"depth":3},"immutable-objects":{"type":"header","text":"Immutable objects","value":"immutable-objects","line":170,"column":0,"depth":3}},"children":[],"parent":"CYhmeBoFXVrSfWtmJQaGy","data":{}},"body":"\u003ch1 id=\"mocks\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#mocks\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eMocks\u003c/h1\u003e\n\u003ch2 id=\"intro\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#intro\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eIntro\u003c/h2\u003e\n\u003cp\u003eMocks provide a way to interact with external systems during testing, without needing access the external system.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e unittest \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e mock\n\n\u003cspan class=\"token comment\"\u003e# create mock object\u003c/span\u003e\nm \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e mock\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eMock\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# set an attribute\u003c/span\u003e\nm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esome_attribute\n\n\u003cspan class=\"token comment\"\u003e# set a function/method\u003c/span\u003e\nm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esome_attribute\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# set return value\u003c/span\u003e\nm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esome_attribute\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ereturn_value \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e42\u003c/span\u003e\nm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esome_attribute\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# returns 42\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"complex-return-values-side_effect\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#complex-return-values-side_effect\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eComplex return values (side_effect)\u003c/h2\u003e\n\u003cp\u003eHowever, the problem comes when trying to set a function as the return value to the attribute. \u003c/p\u003e\n\u003cp\u003eExample:\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\n\u003cspan class=\"token comment\"\u003e# any function\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eprint42\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token number\"\u003e42\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# set attribute return value to print42\u003c/span\u003e\nm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esome_attribute\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ereturn_value \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e print42\n\nm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esome_attribute\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \n\u003cspan class=\"token comment\"\u003e# call attribute from mocks - expecting the return value of 42\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# does not resolve print42 function and prints function meta data instead\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo resolve this issue, mock also has the \u003ccode\u003eside_effect\u003c/code\u003e attribute, which accepts callables, iterables, and exceptions, changing behaviour accordingly.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eif an exception is passed the mock will raise it\u003c/li\u003e\n\u003cli\u003eif an iterable is passed the mock will yield the results of the iterable\u003c/li\u003e\n\u003cli\u003eif a callable is passed the mock will resolve it\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003em\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esome_attribute\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eside_effect \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token builtin\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\nm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esome_attribute\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 1\u003c/span\u003e\nm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esome_attribute\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 2\u003c/span\u003e\nm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esome_attribute\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 3\u003c/span\u003e\nm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esome_attribute\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# StopIteration exception\u003c/span\u003e\n\n\n\u003cspan class=\"token comment\"\u003e# any function\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eprint42\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token number\"\u003e42\u003c/span\u003e\n\nm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esome_attribute\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eside_effect \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e print_answer\nm\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esome_attribute\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 42\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"asserting-calls\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#asserting-calls\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eAsserting calls\u003c/h2\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eMyObj\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e repo\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        repo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003econnect\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e unittest \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e mock\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e myobj\n\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003etest_connect\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    external_obj \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e mock\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eMock\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    myobj\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eMyObj\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eexternal_obj\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    external_obj\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003econnect\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eassert_called_with\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis would pass the test as the mock in this case is simply recording what it was called with, using the \u003ccode\u003eassert_called_with()\u003c/code\u003e method. \u003c/p\u003e\n\u003cp\u003eIt is also possible to pass the expected arguments e.g. \u003ccode\u003eassert_called_with(t=10, x=\"string\")\u003c/code\u003e. In the above example this would fail as the argument was actually called with no arguments. \u003c/p\u003e\n\u003cp\u003eThere are other methods and attributes mock provides:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eassert_called_once_with\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eassert_any_call\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eassert_has_calls\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eassert_not_called\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecall_count\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eetc...\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"patching\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#patching\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003ePatching\u003c/h2\u003e\n\u003cp\u003ePatching essentially intercepts known function calls and replace the return value.\u003c/p\u003e\n\u003cp\u003eThis can be useful when we know the value will change dependent on external factors, which do not depend on our code. The downside to patching is the test is no longer pure and relies on knowing upfront which callable return value will require patching.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e os\n\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e unittest\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003emock \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e patch\n\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003efilepath\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erelative_path\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e os\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003epath\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eabspath\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erelative_path\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003etest_filepath\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    relative_path \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'../somefile.ext'\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e# patch externally dependent callable and test within with block\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ewith\u003c/span\u003e patch\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'os.path.abspath'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e abspath_mock\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\n        \u003cspan class=\"token comment\"\u003e# fake absolute path\u003c/span\u003e\n        test_abspath \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'some/abs/path'\u003c/span\u003e\n\n        \u003cspan class=\"token comment\"\u003e# set new output for os.path.abspath\u003c/span\u003e\n        abspath_mock\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ereturn_value \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e test_abspath\n\n        \u003cspan class=\"token comment\"\u003e# when os.path.abspath called returns 'some/abs/path' instead\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eassert\u003c/span\u003e filepath\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erelative_path\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e test_abspath\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"patching-decorator\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#patching-decorator\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003ePatching decorator\u003c/h3\u003e\n\u003cp\u003ePatching can alternatively be done with the help of a decorator.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# decorator applied to entire function\u003c/span\u003e\n\u003cspan class=\"token decorator annotation punctuation\"\u003e@patch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'os.path.abspath'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# first argument is now the the mock variable\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003etest_filepath\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eabspath_mock\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    relative_path \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'../somefile.ext'\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e# with statement now removed\u003c/span\u003e\n    test_abspath \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'some/abs/path'\u003c/span\u003e\n    abspath_mock\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ereturn_value \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e test_abspath\n    \u003cspan class=\"token keyword\"\u003eassert\u003c/span\u003e filepath\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erelative_path\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e test_abspath\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSame can also be achieved for multiple patches at the same time.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# two decorators applied\u003c/span\u003e\n\u003cspan class=\"token decorator annotation punctuation\"\u003e@patch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'os.path.getsize'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token decorator annotation punctuation\"\u003e@patch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'os.path.abspath'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# second argument is added for the getsize mock\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003etest_filepath\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eabspath_mock\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e getsize_mock\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    relative_path \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'../somefile.ext'\u003c/span\u003e\n\n    test_abspath \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'some/abs/path'\u003c/span\u003e\n    abspath_mock\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ereturn_value \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e test_abspath\n\n    \u003cspan class=\"token comment\"\u003e# fake size set as output for os.path.getsize\u003c/span\u003e\n    test_size \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1234\u003c/span\u003e\n    getsize_mock\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ereturn_value \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e test_size\n\n    \u003cspan class=\"token keyword\"\u003eassert\u003c/span\u003e filepath\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erelative_path\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e test_abspath\n    \u003cspan class=\"token keyword\"\u003eassert\u003c/span\u003e filesize\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003erelative_path\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e test_size\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"immutable-objects\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#immutable-objects\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eImmutable objects\u003c/h3\u003e\n\u003cp\u003eObjects implemented in C are shared between the interpreter and require the objects to be immutable. Therefore it is not always possible to directly patch an object.\u003c/p\u003e\n\u003cp\u003eFor example, if we were to attempt to patch the datetime now method \u003ccode\u003e@patch('datetime.datetime.now')\u003c/code\u003e, this would throw an error \u003ccode\u003eTypeError: can't set attributes of built-in/extension type 'datetime.datetime'\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThere are ways to address this and start from the fact that importing or sub-classing an immutable object gives you a mutable \u003cem\u003ecopy\u003c/em\u003e.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token comment\"\u003e# patch now points to imported module\u003c/span\u003e\n\u003cspan class=\"token decorator annotation punctuation\"\u003e@patch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'fileinfo.logger.datetime.datetime'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003etest_log\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emock_now\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    test_now \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e123\u003c/span\u003e\n    test_message \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"A test message\"\u003c/span\u003e\n    \n    \u003cspan class=\"token comment\"\u003e# method \"now\" return value must be set at this point\u003c/span\u003e\n    mock_now\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003enow\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ereturn_value \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e test_now\n    \n    test_logger \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Logger\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    test_logger\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003elog\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etest_message\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003eassert\u003c/span\u003e test_logger\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003emessages \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etest_now\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e test_message\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCould alternatively create an additional function to call the immutable object and reference from that, however, this requires changing source code. Best practise to avoid changing source code for testing. \u003c/p\u003e","noteIndex":{"id":"wKnnZhcT81I2alc5HhXno","title":"My Notes","desc":"","updated":1646173420202,"created":1641216001965,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"23c39f5d43671e2637693fd87342c2be","links":[],"anchors":{"useful-dendron-resources":{"type":"header","text":"Useful Dendron resources","value":"useful-dendron-resources","line":17,"column":0,"depth":2}},"children":["7wtd2ak5s7jnkqjv8i5i3ps","sYfiAktveIvkILM3fU7yB","16imzpAsqMNTJWlocVcKd","cjBwhNONpuMscNbjewu8c","EsqRBfxiZHAMi1cWO1kJO","jHwcTQeSxj4MgEpLIn5ZM","85vKTbSj5SAHmePl0EQfI","lVEmg3KrF6EP6aqrVtEoL","BygRptOx3rKYLAUcZh6NB","HXj3jkv5vTwRzIk3Isx4E"],"parent":null,"data":{},"body":"\nI am using Dendron to store all of my notes. \n\nThis includes everything from courses \u0026 books, as well as general reference and useful information from videos \u0026 articles.\n\nGithub Actions is configured to republish the notes on each commit: \n\nhttps://rick-62.github.io/Notes/\n\n\n## Useful Dendron resources\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"publishing":{"siteFaviconPath":"/Notes/favicon.ico","enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enablePrettyLinks":true,"assetsPrefix":"/Notes","siteUrl":"https://rick-62.github.io","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"enableTaskNotes":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableHandlebarTemplates":true,"enableFullHierarchyNoteTitle":false,"enableSmartRefs":false,"dendronVersion":"0.105.0"},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"useFMTitle":true,"useNoteTitleForLink":true,"mermaid":true,"useKatex":true,"site":{"copyAssets":true,"siteHierarchies":["root"],"siteRootDir":"docs","usePrettyRefs":true,"title":"Dendron","description":"Personal knowledge space","siteLastModified":true,"gh_edit_branch":"main","siteUrl":"localhost:3000","usePrettyLinks":true,"siteNotesDir":"notes","siteFaviconPath":"favicon.ico","gh_edit_link":true,"gh_edit_link_text":"Edit this page on GitHub","gh_root":"docs/","gh_edit_view_mode":"edit","writeStubs":true,"siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"U50rbDx35rbFscmmglIMR"},"buildId":"x_d4yb4f_0V4SOPHOkEsf","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>